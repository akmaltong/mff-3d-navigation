# ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! MFF-NavApp + Lighting System

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è –∏–∑ **custom-folio** —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ **MFF-NavApp**.

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–°–æ–∑–¥–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ LightingSystem**
**–§–∞–π–ª:** `src/lib/LightingSystem.tsx`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ `LightingSystem` - DirectionalLight + AmbientLight —Å —Ç–µ–Ω—è–º–∏
- ‚úÖ `FakeLightBounce` - –∏–º–∏—Ç–∞—Ü–∏—è –æ—Ç—Ä–∞–∂—ë–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∞
- ‚úÖ `CoreShadows` - —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ —Ç–µ–Ω–∏
- ‚úÖ `LightingHelpers` - –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ helpers

### 2. **–û–±–Ω–æ–≤–ª—ë–Ω appStore**
**–§–∞–π–ª:** `src/store/appStore.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
```typescript
sunIntensity: number              // 0-20, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5.0
ambientIntensity: number          // 0-10, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.0
autoQuality: boolean              // –∞–≤—Ç–æ-FPS, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false
```

### 3. **–û–±–Ω–æ–≤–ª—ë–Ω Scene3D.tsx**
**–§–∞–π–ª:** `src/components/Scene3D.tsx`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—ë—Ä—Ç–∫–∞:
```tsx
<LightingSystem>
  <SceneContent />
  <FakeLightBounce intensity={0.3} />
  <CoreShadows enabled={true} />
</LightingSystem>
```

### 4. **–û–±–Ω–æ–≤–ª—ë–Ω SettingsPanel**
**–§–∞–π–ª:** `src/components/SettingsPanel.tsx`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ **"–û—Å–≤–µ—â–µ–Ω–∏–µ"** —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏:
- ‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å)
- üí° –§–æ–Ω–æ–≤—ã–π —Å–≤–µ—Ç
- üåë –¢–µ–Ω–∏
- ‚ö° –ê–≤—Ç–æ –∫–∞—á–µ—Å—Ç–≤–æ (FPS)
- üìä –ö–∞—á–µ—Å—Ç–≤–æ (–í—ã—Å–æ–∫–æ–µ/–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- üïê –í—Ä–µ–º—è —Å—É—Ç–æ–∫
- üß≠ –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–ª–Ω—Ü–∞
- –ü—Ä–µ—Å–µ—Ç—ã: –î–µ–Ω—å, –ó–∞–∫–∞—Ç, –ù–æ—á—å, –Ø—Ä–∫–æ

---

## üöÄ –ó–∞–ø—É—Å–∫

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ **http://localhost:5173**

```bash
cd MFF-NavApp_01/MFF-NavApp
npm run dev
```

---

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –û—Ç–∫—Ä–æ–π –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
–ù–∞–∂–º–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É **‚öôÔ∏è** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 2. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–û—Å–≤–µ—â–µ–Ω–∏–µ"
–ü–µ—Ä–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å–ª–µ–≤–∞ (–∏–∫–æ–Ω–∫–∞ ‚òÄÔ∏è).

### 3. –ù–∞—Å—Ç—Ä–æ–π –æ—Å–≤–µ—â–µ–Ω–∏–µ

#### –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ—Å–µ—Ç—ã:
- **‚òÄÔ∏è –î–µ–Ω—å** - —è—Ä–∫–æ–µ –¥–Ω–µ–≤–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ (14:00)
- **üåÖ –ó–∞–∫–∞—Ç** - –º—è–≥–∫–∏–π –≤–µ—á–µ—Ä–Ω–∏–π —Å–≤–µ—Ç (18:00)
- **üåô –ù–æ—á—å** - —Ç—ë–º–Ω–æ–µ –Ω–æ—á–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
- **‚ú® –Ø—Ä–∫–æ** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å

#### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
- **–°–æ–ª–Ω—Ü–µ** - –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å DirectionalLight (0-20)
- **–§–æ–Ω–æ–≤—ã–π —Å–≤–µ—Ç** - –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å AmbientLight (0-10)
- **–¢–µ–Ω–∏** - —Å–∏–ª–∞ –∑–∞—Ç–µ–Ω–µ–Ω–∏—è (0-1)
- **–ê–≤—Ç–æ –∫–∞—á–µ—Å—Ç–≤–æ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ FPS
- **–í—Ä–µ–º—è —Å—É—Ç–æ–∫** - –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–æ–ª–Ω—Ü–∞ (0-24 —á–∞—Å–∞)
- **–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è** - –∞–∑–∏–º—É—Ç —Å–æ–ª–Ω—Ü–∞ (0-360¬∞)

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º

| –§—É–Ω–∫—Ü–∏—è | custom-folio | MFF-NavApp |
|---------|--------------|------------|
| **Framework** | Vanilla JS | React + TypeScript |
| **Renderer** | WebGPU | WebGL 2 |
| **DirectionalLight** | ‚úÖ | ‚úÖ |
| **AmbientLight** | ‚úÖ | ‚úÖ |
| **Shadow Map** | ‚úÖ (512/2048) | ‚úÖ (512/2048) |
| **Core Shadows** | ‚úÖ (TSL —à–µ–π–¥–µ—Ä—ã) | ‚ö†Ô∏è (HemisphereLight) |
| **Fake Bounce** | ‚úÖ (—à–µ–π–¥–µ—Ä—ã) | ‚ö†Ô∏è (DirectionalLight) |
| **Auto Quality** | ‚úÖ | ‚úÖ |
| **Bloom** | ‚úÖ (TSL) | ‚úÖ (@react-three/postprocessing) |
| **UI Panel** | ‚úÖ (Tweakpane) | ‚úÖ (Custom React) |

---

## üé® –ü—Ä–µ—Å–µ—Ç—ã –æ—Å–≤–µ—â–µ–Ω–∏—è

### ‚òÄÔ∏è –î–µ–Ω—å
```typescript
sunIntensity: 5.0
ambientIntensity: 2.0
timeOfDay: 14
sunOrientation: 180
```

### üåÖ –ó–∞–∫–∞—Ç
```typescript
sunIntensity: 2.0
ambientIntensity: 1.0
timeOfDay: 18
sunOrientation: 270
```

### üåô –ù–æ—á—å
```typescript
sunIntensity: 0.5
ambientIntensity: 0.5
timeOfDay: 0
sunOrientation: 0
```

### ‚ú® –Ø—Ä–∫–æ
```typescript
sunIntensity: 8.0
ambientIntensity: 3.0
timeOfDay: 12
sunOrientation: 180
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å helpers
–í `LightingSystem.tsx` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π:
```tsx
<LightingHelpers showDirectionHelper={true} showShadowHelper={true} />
```

### –ö–æ–Ω—Å–æ–ª—å
–î–æ–±–∞–≤—å –≤ `LightingSystem.tsx`:
```tsx
useEffect(() => {
  console.log('üî¶ Lighting:', {
    sunPos: directionalLightRef.current?.position,
    intensity: directionalLightRef.current?.intensity,
    shadowEnabled: gl.shadowMap.enabled,
  })
}, [store.sunIntensity, store.ambientIntensity])
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –¢–µ–Ω–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –í `VenueModelBaked.tsx` –≤–∫–ª—é—á–∏:
```tsx
child.castShadow = true
child.receiveShadow = true
```

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–†–µ—à–µ–Ω–∏–µ:**
1. –í–∫–ª—é—á–∏ "–ê–≤—Ç–æ –∫–∞—á–µ—Å—Ç–≤–æ"
2. –ü–µ—Ä–µ–∫–ª—é—á–∏ –Ω–∞ "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
3. –£–º–µ–Ω—å—à–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å Bloom

### –°—Ü–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º —Ç—ë–º–Ω–∞—è
**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å `sunIntensity` –¥–æ 8-10
- –£–≤–µ–ª–∏—á—å `ambientIntensity` –¥–æ 3-4
- –ü—Ä–æ–≤–µ—Ä—å `toneMappingExposure` (1.0-1.5)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
MFF-NavApp/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LightingSystem.tsx       ‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Scene3D.tsx              ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsPanel.tsx        ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω (–≤–∫–ª–∞–¥–∫–∞ –û—Å–≤–µ—â–µ–Ω–∏–µ)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HDRIEnvironment.tsx
‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ appStore.ts              ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω
‚îÇ   ‚îî‚îÄ‚îÄ ...
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R)

---

**–î–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** 2026-02-17  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–°–µ—Ä–≤–µ—Ä:** http://localhost:5173
